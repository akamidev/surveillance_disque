# Script de Surveillance de l'Espace Disque avec Alerte Email

## Description üìÑ

Ce script Python surveille l'utilisation de l'espace disque et envoie une alerte par email si l'occupation d√©passe un certain seuil. Il est particuli√®rement utile pour √©viter que le disque ne se remplisse compl√®tement, ce qui peut entra√Æner des ralentissements ou des erreurs.

## Fonctionnalit√©s üîß

- üìä V√©rifie l'espace utilis√© sur le disque sp√©cifi√©.
- üìß Envoie une alerte par email lorsque l'espace disque d√©passe un seuil d√©fini.
- üîß Facile √† personnaliser pour surveiller d'autres disques et ajuster le seuil de d√©clenchement.

## Installation üì•

### Pr√©requis

1. **Python install√©** : Assure-toi d'avoir Python install√© sur ton syst√®me.
2. **Mot de passe d'application Gmail** : Si tu utilises Gmail pour l'alerte email, tu dois g√©n√©rer un mot de passe d'application. Voici comment faire :

   - Connecte-toi √† ton compte Google.
   - Active la validation en deux √©tapes (2FA) dans [la s√©curit√© de ton compte](https://myaccount.google.com/security).
   - G√©n√®re un [mot de passe d'application](https://myaccount.google.com/apppasswords) pour l'utiliser dans le script.

### √âtapes d'installation

1. **Cloner ce repository** sur ton syst√®me :
   ```bash
   git clone https://github.com/tonutilisateur/surveillance-espace-disque.git
   ```

2. **Configurer les param√®tres SMTP :**

- Ouvre le fichier surveillance_disque.py.
- Remplace TON_MOT_DE_PASSE_APPLICATION par le mot de passe d'application que tu as g√©n√©r√© dans ton compte Google.

3. **Ex√©cuter le script :**
   
   ```bash
   python surveillance_disque.py
   ```

### Personnalisation ‚öôÔ∏è

Modifier le seuil d'alerte
Par d√©faut, le script est configur√© pour d√©clencher une alerte lorsque l'espace disque utilis√© d√©passe 56%. Tu peux ajuster ce seuil en modifiant la variable usage_threshold dans le script :

```bash
usage_threshold = 56  # Seuil par d√©faut, ajuster selon ton besoin
```
### Modifier le disque surveill√© 

Par d√©faut, le script surveille le disque C:. Si tu souhaites surveiller un autre disque, tu peux modifier la variable disk_to_monitor :

```bash
disk_to_monitor = "D:\\"  # Par exemple pour surveiller le disque D:
``` 
### Script Python üñ•Ô∏è

Voici le script complet :

```bash
import shutil
import smtplib
from email.mime.text import MIMEText

# Fonction pour v√©rifier l'occupation du disque
def check_disk_usage(disk, threshold):
    total, used, free = shutil.disk_usage(disk)
    # Convertir en pourcentage
    percent_used = (used / total) * 100
    print(f"Espace utilis√© sur {disk}: {percent_used:.2f}%")
    
    # Si l'espace utilis√© d√©passe le seuil
    if percent_used > threshold:
        alert_user(percent_used, disk)

# Fonction pour alerter l'utilisateur (ex. via email)
def alert_user(percent_used, disk):
    message = f"Alerte : Le disque {disk} a atteint {percent_used:.2f}% de son espace."
    print(message)
    
    # Envoi d'un email (√† configurer avec ton propre serveur SMTP)
    send_email("Alerte Espace Disque", message)

# Fonction pour envoyer un email
def send_email(subject, body):
    from_email = "akamimehdi.dev@gmail.com"  # Ton email Gmail
    password = "TON_MOT_DE_PASSE_APPLICATION"  # Remplace par le mot de passe d'application g√©n√©r√©
    to_email = "akamimehdi.dev@gmail.com"     # Email o√π tu veux recevoir l'alerte
    
    msg = MIMEText(body)
    msg["Subject"] = subject
    msg["From"] = from_email
    msg["To"] = to_email
    
    try:
        # Connexion au serveur SMTP de Gmail
        with smtplib.SMTP_SSL("smtp.gmail.com", 465) as server:
            server.login(from_email, password)
            server.sendmail(from_email, to_email, msg.as_string())
        print("Email envoy√© avec succ√®s.")
    except Exception as e:
        print(f"Erreur lors de l'envoi de l'email: {e}")

if __name__ == "__main__":
    # Chemin du disque √† surveiller (par exemple C:\ pour Windows)
    disk_to_monitor = "C:\\"
    # Seuil d'alerte (ici 56% pour tester rapidement)
    usage_threshold = 56
    
    check_disk_usage(disk_to_monitor, usage_threshold)

``` 

### Automatisation üïí

Planifier l'ex√©cution automatique du script avec le Planificateur de t√¢ches Windows
1. **Ouvrir le Planificateur de t√¢ches :**

- Dans le menu d√©marrer de Windows, tape "Planificateur de t√¢ches" et ouvre l'application.
2. **Cr√©er une nouvelle t√¢che :**

- Dans le menu √† droite, clique sur Cr√©er une t√¢che.
- Donne un nom √† ta t√¢che, par exemple Surveillance Espace Disque.
- Coche Ex√©cuter avec les autorisations maximales pour garantir que le script a les droits n√©cessaires.
3. **Configurer un d√©clencheur :**

- Va dans l'onglet **D√©clencheurs** et clique sur Nouveau.
- Choisis quand tu veux que la t√¢che se d√©clenche, par exemple tous les jours √† une heure sp√©cifique.
- Clique sur **OK**.
  
4. **Configurer l'action (lancer le script) :**

- Va dans l'onglet **Action**s et clique sur **Nouveau**.
- Dans **Programme/script**, tape python.
- Dans **Ajouter des arguments**, entre le chemin complet vers ton script Python. Par exemple :

   ```bash
    C:\Scripts\surveillance_disque.py
   ```
- Clique sur OK.

5. **Finaliser la t√¢che :**

- V√©rifie que tout est configur√© correctement, puis clique sur OK pour sauvegarder la t√¢che.
- Tu peux tester en faisant un clic droit sur la t√¢che et en s√©lectionnant **Ex√©cuter**.

### Test de l'alerte üìß

Pour simuler un test imm√©diat :

- Le script est actuellement configur√© pour envoyer une alerte √† 56% d'utilisation du disque (ce qui correspond √† la situation actuelle du disque C: de ton syst√®me).
- Ex√©cute le script pour v√©rifier que tu re√ßois bien un email d'alerte dans ta bo√Æte Gmail.

### Auteur üë®‚Äçüíª

- Mehdi Akami - [Mon profil GitHub](https://github.com/akamidev)
  
### Licence üìú

Ce projet est sous licence MIT. Consulte le fichier [LICENSE](https://github.com/akamidev/surveillance_disque/blob/main/LICENSE) pour plus d'informations.    


### Explication des sections :

- **Description** : Explique ce que fait le script et pourquoi il est utile.
- **Fonctionnalit√©s** : Liste les fonctionnalit√©s principales du script.
- **Installation** : Fournit des instructions pour cloner le projet, configurer Gmail, et ex√©cuter le script.
- **Personnalisation** : Indique comment modifier le seuil d'alerte et le disque surveill√©.
- **Script Python** : Contient le code du script complet.
- **Automatisation** : Explique comment planifier l'ex√©cution du script avec le Planificateur de t√¢ches.
- **Test de l'alerte** : Guide pour v√©rifier si l'alerte email fonctionne correctement.
